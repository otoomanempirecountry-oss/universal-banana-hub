-- [[ üçå BANANA LIB V15 - BANANA TEAM OFFICIAL ]] --
local BananaLib = {}
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local Mouse = game:GetService("Players").LocalPlayer:GetMouse()

function BananaLib:CreateWindow(Config)
    local HubName = Config.Name or "BANANA HUB"
    local LogoID = "rbxassetid://15286469273" -- Tu mo≈ºesz wkleiƒá ID swojego logo Banana Team
    
    local UI = Instance.new("ScreenGui", CoreGui)
    UI.Name = "BananaV15_Official"

    -- [[ 1. LOGO BANANA TEAM SPLASH ]] --
    local Splash = Instance.new("Frame", UI)
    Splash.Size = UDim2.new(1, 0, 1, 0)
    Splash.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Splash.ZIndex = 100

    local LogoImg = Instance.new("ImageLabel", Splash)
    LogoImg.Size = UDim2.new(0, 200, 0, 200)
    LogoImg.Position = UDim2.new(0.5, -100, 0.5, -100)
    LogoImg.BackgroundTransparency = 1
    LogoImg.Image = LogoID
    LogoImg.ImageTransparency = 1

    local TeamText = Instance.new("TextLabel", Splash)
    TeamText.Size = UDim2.new(1, 0, 0, 50)
    TeamText.Position = UDim2.new(0, 0, 0.5, 110)
    TeamText.Text = "BANANA TEAM"
    TeamText.TextColor3 = Color3.fromRGB(255, 230, 0)
    TeamText.Font = Enum.Font.GothamBold
    TeamText.TextSize = 30
    TeamText.TextTransparency = 1
    TeamText.BackgroundTransparency = 1

    -- Animacja Logo
    task.spawn(function()
        TweenService:Create(LogoImg, TweenInfo.new(1.5), {ImageTransparency = 0}):Play()
        TweenService:Create(TeamText, TweenInfo.new(1.5), {TextTransparency = 0}):Play()
        task.wait(3.5)
        TweenService:Create(Splash, TweenInfo.new(1), {BackgroundTransparency = 1}):Play()
        TweenService:Create(LogoImg, TweenInfo.new(1), {ImageTransparency = 1}):Play()
        TweenService:Create(TeamText, TweenInfo.new(1), {TextTransparency = 1}):Play()
        task.wait(1)
        Splash:Destroy()
    end)

    -- [[ 2. G≈Å√ìWNE OKNO - GLASS NEON ]] --
    local Main = Instance.new("Frame", UI)
    Main.Size = UDim2.new(0, 620, 0, 400)
    Main.Position = UDim2.new(0.5, -310, 0.5, -200)
    Main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Main.BackgroundTransparency = 0.2 -- Przezroczyste czarne
    Main.Visible = false
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)

    local Border = Instance.new("UIStroke", Main)
    Border.Color = Color3.fromRGB(255, 230, 0)
    Border.Thickness = 2.5

    task.delay(4.5, function() Main.Visible = true end)

    -- PRZYCISK ZAMKNIƒòCIA
    local Close = Instance.new("TextButton", Main)
    Close.Size = UDim2.new(0, 30, 0, 30)
    Close.Position = UDim2.new(1, -35, 0, 5)
    Close.BackgroundTransparency = 1
    Close.Text = "√ó"; Close.TextColor3 = Color3.fromRGB(255, 230, 0)
    Close.TextSize = 30
    Close.MouseButton1Click:Connect(function() UI:Destroy() end)

    -- DOPRACOWANY SIDEBAR
    local Sidebar = Instance.new("Frame", Main)
    Sidebar.Size = UDim2.new(0, 160, 1, -10)
    Sidebar.Position = UDim2.new(0, 5, 0, 5)
    Sidebar.BackgroundColor3 = Color3.fromRGB(255, 230, 0)
    Sidebar.BackgroundTransparency = 0.1
    Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 10)

    local SideTitle = Instance.new("TextLabel", Sidebar)
    SideTitle.Text = HubName; SideTitle.Size = UDim2.new(1,0,0,50); SideTitle.Font = Enum.Font.GothamBold; SideTitle.TextColor3 = Color3.fromRGB(0,0,0); SideTitle.TextSize = 16; SideTitle.BackgroundTransparency = 1

    local TabScroll = Instance.new("ScrollingFrame", Sidebar)
    TabScroll.Size = UDim2.new(1, -10, 1, -60); TabScroll.Position = UDim2.new(0, 5, 0, 55); TabScroll.BackgroundTransparency = 1; TabScroll.ScrollBarThickness = 0
    local TabList = Instance.new("UIListLayout", TabScroll); TabList.Padding = UDim.new(0, 8)

    local Container = Instance.new("Frame", Main)
    Container.Size = UDim2.new(1, -180, 1, -40); Container.Position = UDim2.new(0, 170, 0, 30); Container.BackgroundTransparency = 1

    local Tabs = {Active = nil}
    function Tabs:CreateTab(Name)
        local Page = Instance.new("ScrollingFrame", Container)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.Visible = false; Page.BackgroundTransparency = 1; Page.ScrollBarThickness = 0
        Instance.new("UIListLayout", Page).Padding = UDim.new(0, 10)

        local TBtn = Instance.new("TextButton", TabScroll)
        TBtn.Size = UDim2.new(1, 0, 0, 40)
        TBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        TBtn.BackgroundTransparency = 0.8 -- Nieaktywny
        TBtn.Text = Name; TBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
        TBtn.Font = Enum.Font.GothamBold; TBtn.TextSize = 13
        Instance.new("UICorner", TBtn).CornerRadius = UDim.new(0, 8)

        TBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Container:GetChildren()) do v.Visible = false end
            for _, v in pairs(TabScroll:GetChildren()) do 
                if v:IsA("TextButton") then 
                    TweenService:Create(v, TweenInfo.new(0.3), {BackgroundTransparency = 0.8, TextColor3 = Color3.fromRGB(0,0,0)}):Play()
                end 
            end
            Page.Visible = true
            TweenService:Create(TBtn, TweenInfo.new(0.3), {BackgroundTransparency = 0.2, TextColor3 = Color3.fromRGB(0,0,0)}):Play()
        end)

        if not Tabs.Active then
            Tabs.Active = true; Page.Visible = true; TBtn.BackgroundTransparency = 0.2
        end

        local Elements = {}
        
        function Elements:CreateButton(Text, Callback)
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.new(0.96, 0, 0, 42); B.BackgroundColor3 = Color3.fromRGB(15,15,15); B.BackgroundTransparency = 0.4
            B.Text = "   " .. Text; B.TextColor3 = Color3.fromRGB(255, 230, 0); B.Font = Enum.Font.GothamBold; B.TextXAlignment = Enum.TextXAlignment.Left
            Instance.new("UICorner", B); Instance.new("UIStroke", B).Color = Color3.fromRGB(255,230,0)
            B.MouseButton1Click:Connect(Callback)
        end

        function Elements:CreateSlider(Text, Min, Max, Def, Callback)
            local S = Instance.new("Frame", Page)
            S.Size = UDim2.new(0.96, 0, 0, 55); S.BackgroundColor3 = Color3.fromRGB(10,10,10); S.BackgroundTransparency = 0.5
            Instance.new("UICorner", S); Instance.new("UIStroke", S).Color = Color3.fromRGB(255,230,0)
            
            local T = Instance.new("TextLabel", S); T.Text = "  "..Text; T.Size = UDim2.new(1,0,0,25); T.TextColor3 = Color3.fromRGB(255,255,255); T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left
            local V = Instance.new("TextLabel", S); V.Text = tostring(Def); V.Size = UDim2.new(0,40,0,25); V.Position = UDim2.new(1,-45,0,0); V.TextColor3 = Color3.fromRGB(255,230,0); V.BackgroundTransparency = 1
            
            local Bar = Instance.new("Frame", S); Bar.Size = UDim2.new(0.9, 0, 0, 5); Bar.Position = UDim2.new(0.05, 0, 0.75, 0); Bar.BackgroundColor3 = Color3.fromRGB(40,40,40)
            local Fill = Instance.new("Frame", Bar); Fill.Size = UDim2.new((Def-Min)/(Max-Min), 0, 1, 0); Fill.BackgroundColor3 = Color3.fromRGB(255,230,0)

            local function Update()
                local move = math.clamp((Mouse.X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
                Fill.Size = UDim2.new(move, 0, 1, 0)
                local val = math.floor(Min + (Max-Min)*move)
                V.Text = tostring(val); Callback(val)
            end
            Bar.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then 
                local con; con = RunService.RenderStepped:Connect(Update)
                UserInputService.InputEnded:Connect(function(i2) if i2.UserInputType == Enum.UserInputType.MouseButton1 then con:Disconnect() end end)
            end end)
        end

        return Elements
    end

    -- Draggable
    local d, ds, sp
    Main.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then d = true; ds = i.Position; sp = Main.Position end end)
    UserInputService.InputChanged:Connect(function(i) if d and i.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = i.Position - ds
        Main.Position = UDim2.new(sp.X.Scale, sp.X.Offset + delta.X, sp.Y.Scale, sp.Y.Offset + delta.Y)
    end end)
    Main.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then d = false end end)

    return Tabs
end
return BananaLib
