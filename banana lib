-- [[ üçå BANANA LIB V9 - HYPER ANIMATED EDITION ]] --
local BananaLib = {}
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local function MakeDraggable(gui)
    local dragging, dragInput, dragStart, startPos
    gui.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true; dragStart = input.Position; startPos = gui.Position
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            TweenService:Create(gui, TweenInfo.new(0.1), {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}):Play()
        end
    end)
    gui.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end end)
end

function BananaLib:CreateWindow(Config)
    local UI = Instance.new("ScreenGui", game:GetService("CoreGui"))
    UI.Name = "Banana_Hyper_V9"

    -- [[ 1. SPLASH SCREEN (5 SEKUND) ]] --
    local Splash = Instance.new("Frame", UI)
    Splash.Size = UDim2.new(0, 300, 0, 100)
    Splash.Position = UDim2.new(0.5, -150, 0.5, -50)
    Splash.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    Splash.BorderSizePixel = 0
    Splash.ClipsDescendants = true
    Instance.new("UICorner", Splash).CornerRadius = UDim.new(0, 15)
    
    local SplashTitle = Instance.new("TextLabel", Splash)
    SplashTitle.Size = UDim2.new(1, 0, 1, 0)
    SplashTitle.Text = "BANANA HUB"
    SplashTitle.Font = Enum.Font.GothamBold
    SplashTitle.TextColor3 = Color3.fromRGB(255, 215, 0)
    SplashTitle.TextSize = 30
    SplashTitle.BackgroundTransparency = 1
    SplashTitle.TextTransparency = 1

    -- Animacja Splash
    TweenService:Create(SplashTitle, TweenInfo.new(1), {TextTransparency = 0}):Play()
    local pulse = TweenService:Create(SplashTitle, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {TextSize = 35})
    pulse:Play()
    
    task.wait(5) -- Obiecane 5 sekund
    
    pulse:Cancel()
    TweenService:Create(SplashTitle, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
    TweenService:Create(Splash, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In), {Size = UDim2.new(0,0,0,0), Position = UDim2.new(0.5,0,0.5,0)}):Play()
    task.wait(0.6)
    Splash:Destroy()

    -- [[ 2. G≈Å√ìWNE GUI ]] --
    local Main = Instance.new("Frame", UI)
    Main.Size = UDim2.new(0, 0, 0, 0)
    Main.Position = UDim2.new(0.5, 0, 0.5, 0)
    Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Main.BorderSizePixel = 0
    Main.ClipsDescendants = true
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)
    local Stroke = Instance.new("UIStroke", Main)
    Stroke.Color = Color3.fromRGB(255, 215, 0)
    Stroke.Thickness = 2
    
    -- Otwieranie G≈Ç√≥wnego GUI
    TweenService:Create(Main, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Size = UDim2.new(0, 580, 0, 380),
        Position = UDim2.new(0.5, -290, 0.5, -190)
    }):Play()
    
    MakeDraggable(Main)

    local Sidebar = Instance.new("Frame", Main)
    Sidebar.Size = UDim2.new(0, 150, 1, 0)
    Sidebar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Sidebar.BorderSizePixel = 0
    Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 12)

    local TabScroll = Instance.new("ScrollingFrame", Sidebar)
    TabScroll.Size = UDim2.new(1, 0, 1, -60)
    TabScroll.Position = UDim2.new(0, 0, 0, 60)
    TabScroll.BackgroundTransparency = 1
    TabScroll.ScrollBarThickness = 0
    Instance.new("UIListLayout", TabScroll).Padding = UDim.new(0, 5)

    local Container = Instance.new("Frame", Main)
    Container.Size = UDim2.new(1, -165, 1, -20)
    Container.Position = UDim2.new(0, 160, 0, 10)
    Container.BackgroundTransparency = 1

    local Tabs = {Active = nil}
    function Tabs:CreateTab(Name)
        local Page = Instance.new("ScrollingFrame", Container)
        Page.Size = UDim2.new(1, 0, 1, 0)
        Page.BackgroundTransparency = 1
        Page.Visible = false
        Page.ScrollBarThickness = 0
        Instance.new("UIListLayout", Page).Padding = UDim.new(0, 10)

        local TBtn = Instance.new("TextButton", TabScroll)
        TBtn.Size = UDim2.new(0.9, 0, 0, 35)
        TBtn.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
        TBtn.BackgroundTransparency = 1
        TBtn.Text = Name
        TBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
        TBtn.Font = Enum.Font.GothamMedium
        TBtn.TextSize = 13
        Instance.new("UICorner", TBtn).CornerRadius = UDim.new(0, 6)

        TBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Container:GetChildren()) do v.Visible = false end
            Page.Visible = true
            for _, v in pairs(TabScroll:GetChildren()) do if v:IsA("TextButton") then
                TweenService:Create(v, TweenInfo.new(0.3), {BackgroundTransparency = 1, TextColor3 = Color3.fromRGB(150, 150, 150)}):Play()
            end end
            TweenService:Create(TBtn, TweenInfo.new(0.3), {BackgroundTransparency = 0.2, TextColor3 = Color3.fromRGB(10, 10, 10)}):Play()
        end)

        if not Tabs.Active then
            Tabs.Active = true; Page.Visible = true; TBtn.BackgroundTransparency = 0.2; TBtn.TextColor3 = Color3.fromRGB(10, 10, 10)
        end

        local Elements = {}
        function Elements:CreateButton(Text, Callback)
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.new(0.96, 0, 0, 40)
            B.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            B.Text = "  " .. Text
            B.TextColor3 = Color3.fromRGB(255, 215, 0)
            B.Font = Enum.Font.GothamBold
            B.TextSize = 14
            B.TextXAlignment = Enum.TextXAlignment.Left
            Instance.new("UICorner", B).CornerRadius = UDim.new(0, 8)
            
            B.MouseButton1Click:Connect(function()
                TweenService:Create(B, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(255, 215, 0), TextColor3 = Color3.fromRGB(10, 10, 10)}):Play()
                task.wait(0.1)
                TweenService:Create(B, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(30, 30, 30), TextColor3 = Color3.fromRGB(255, 215, 0)}):Play()
                Callback()
            end)
        end
        
        function Elements:CreateSlider(Name, Min, Max, Start, Callback)
            local S = Instance.new("Frame", Page)
            S.Size = UDim2.new(0.96, 0, 0, 50)
            S.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            Instance.new("UICorner", S)
            
            local T = Instance.new("TextLabel", S)
            T.Text = "  "..Name; T.Size = UDim2.new(1,0,0,25); T.TextColor3 = Color3.fromRGB(255,255,255); T.Font = Enum.Font.Gotham; T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local Bar = Instance.new("Frame", S)
            Bar.Size = UDim2.new(0.9, 0, 0, 5); Bar.Position = UDim2.new(0.05, 0, 0.7, 0); Bar.BackgroundColor3 = Color3.fromRGB(50,50,50); Instance.new("UICorner", Bar)

            local Fill = Instance.new("Frame", Bar)
            Fill.Size = UDim2.new((Start-Min)/(Max-Min), 0, 1, 0); Fill.BackgroundColor3 = Color3.fromRGB(255,215,0); Instance.new("UICorner", Fill)

            Bar.InputBegan:Connect(function(i)
                if i.UserInputType == Enum.UserInputType.MouseButton1 then
                    local con; con = RunService.RenderStepped:Connect(function()
                        local p = math.clamp((UserInputService:GetMouseLocation().X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
                        Fill.Size = UDim2.new(p, 0, 1, 0)
                        Callback(math.floor(Min + (Max-Min)*p))
                    end)
                    UserInputService.InputEnded:Connect(function(i2) if i2.UserInputType == Enum.UserInputType.MouseButton1 then con:Disconnect() end end)
                end
            end)
        end

        return Elements
    end
    return Tabs
end

return BananaLib
