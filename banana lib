-- [[ üçå BANANA LIB V13 - ULTIMATE GLASS & NEON ]] --
local BananaLib = {}
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LP = game:GetService("Players").LocalPlayer
local Mouse = LP:GetMouse()

function BananaLib:CreateWindow(Config)
    local HubName = Config.Name or "BANANA HUB"
    local Bind = Config.ToggleKey or Enum.KeyCode.RightControl
    
    local UI = Instance.new("ScreenGui", game:GetService("CoreGui"))
    UI.Name = "Banana_V13_Final"

    -- [[ SPLASH SCREEN - 5 SEKUND ]] --
    local Splash = Instance.new("Frame", UI)
    Splash.Size = UDim2.new(1, 0, 1, 0)
    Splash.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Splash.ZIndex = 100
    
    local SplashTitle = Instance.new("TextLabel", Splash)
    SplashTitle.Size = UDim2.new(1, 0, 1, 0)
    SplashTitle.Text = HubName; SplashTitle.TextColor3 = Color3.fromRGB(255, 230, 0)
    SplashTitle.Font = Enum.Font.GothamBold; SplashTitle.TextSize = 60; SplashTitle.TextTransparency = 1
    Instance.new("UIStroke", SplashTitle).Color = Color3.fromRGB(255, 230, 0)

    task.spawn(function()
        TweenService:Create(SplashTitle, TweenInfo.new(1.5), {TextTransparency = 0}):Play()
        task.wait(3.5)
        TweenService:Create(Splash, TweenInfo.new(1), {BackgroundTransparency = 1}):Play()
        TweenService:Create(SplashTitle, TweenInfo.new(1), {TextTransparency = 1}):Play()
        task.delay(1, function() Splash:Destroy() end)
    end)

    -- [[ G≈Å√ìWNE OKNO - PRZEZROCZYSTA CZER≈É + ≈ª√ì≈ÅTA RAMKA ]] --
    local Main = Instance.new("Frame", UI)
    Main.Size = UDim2.new(0, 600, 0, 420)
    Main.Position = UDim2.new(0.5, -300, 0.5, -210)
    Main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Main.BackgroundTransparency = 0.2 -- P√ì≈ÅPRZEZROCZYSTY ≈öRODEK
    Main.BorderSizePixel = 0
    Main.Visible = false
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)

    local Border = Instance.new("UIStroke", Main)
    Border.Color = Color3.fromRGB(255, 230, 0) -- ≈ª√ì≈ÅTA OBRAM√ìWKA
    Border.Thickness = 3

    task.delay(4.6, function() Main.Visible = true end)

    -- PRZYCISK ZAMKNIƒòCIA (X)
    local CloseBtn = Instance.new("TextButton", Main)
    CloseBtn.Size = UDim2.new(0, 30, 0, 30)
    CloseBtn.Position = UDim2.new(1, -35, 0, 5)
    CloseBtn.BackgroundTransparency = 1
    CloseBtn.Text = "X"; CloseBtn.TextColor3 = Color3.fromRGB(255, 0, 0)
    CloseBtn.Font = Enum.Font.GothamBold; CloseBtn.TextSize = 20
    CloseBtn.MouseButton1Click:Connect(function() UI:Destroy() end)

    local Sidebar = Instance.new("Frame", Main)
    Sidebar.Size = UDim2.new(0, 150, 1, 0)
    Sidebar.BackgroundColor3 = Color3.fromRGB(255, 230, 0)
    Sidebar.BackgroundTransparency = 0.1
    Instance.new("UICorner", Sidebar)

    local TabHolder = Instance.new("ScrollingFrame", Sidebar)
    TabHolder.Size = UDim2.new(1, 0, 1, -80); TabHolder.Position = UDim2.new(0, 0, 0, 70)
    TabHolder.BackgroundTransparency = 1; TabHolder.ScrollBarThickness = 0
    Instance.new("UIListLayout", TabHolder).Padding = UDim.new(0, 5)

    local Container = Instance.new("Frame", Main)
    Container.Size = UDim2.new(1, -170, 1, -40); Container.Position = UDim2.new(0, 160, 0, 30)
    Container.BackgroundTransparency = 1

    -- Toggle UI klawiszem
    UserInputService.InputBegan:Connect(function(input, gpe)
        if not gpe and input.KeyCode == Bind then Main.Visible = not Main.Visible end
    end)

    local Tabs = {First = nil}
    function Tabs:CreateTab(Name)
        local Page = Instance.new("ScrollingFrame", Container)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.Visible = false; Page.BackgroundTransparency = 1; Page.ScrollBarThickness = 0
        Instance.new("UIListLayout", Page).Padding = UDim.new(0, 10)

        local TBtn = Instance.new("TextButton", TabHolder)
        TBtn.Size = UDim2.new(1, 0, 0, 35); TBtn.BackgroundTransparency = 1
        TBtn.Text = Name; TBtn.TextColor3 = Color3.fromRGB(0,0,0); TBtn.Font = Enum.Font.GothamBold
        
        TBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Container:GetChildren()) do v.Visible = false end
            Page.Visible = true
        end)

        if not Tabs.First then Tabs.First = true; Page.Visible = true end

        local Elements = {}

        -- SLIDER
        function Elements:CreateSlider(Text, Min, Max, Def, Callback)
            local S = Instance.new("Frame", Page)
            S.Size = UDim2.new(0.95, 0, 0, 50); S.BackgroundColor3 = Color3.fromRGB(20,20,20); S.BackgroundTransparency = 0.5
            Instance.new("UICorner", S)
            local sStroke = Instance.new("UIStroke", S); sStroke.Color = Color3.fromRGB(255,230,0); sStroke.Thickness = 1

            local T = Instance.new("TextLabel", S)
            T.Text = "  "..Text; T.Size = UDim2.new(1,0,0,20); T.TextColor3 = Color3.fromRGB(255,255,255); T.BackgroundTransparency = 1; T.TextXAlignment = Enum.TextXAlignment.Left

            local Bar = Instance.new("Frame", S)
            Bar.Size = UDim2.new(0.9, 0, 0, 4); Bar.Position = UDim2.new(0.05, 0, 0.7, 0); Bar.BackgroundColor3 = Color3.fromRGB(50,50,50)
            
            local Fill = Instance.new("Frame", Bar)
            Fill.Size = UDim2.new((Def-Min)/(Max-Min), 0, 1, 0); Fill.BackgroundColor3 = Color3.fromRGB(255, 230, 0)

            Bar.InputBegan:Connect(function(i)
                if i.UserInputType == Enum.UserInputType.MouseButton1 then
                    local move; move = RunService.RenderStepped:Connect(function()
                        local p = math.clamp((Mouse.X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
                        Fill.Size = UDim2.new(p, 0, 1, 0)
                        Callback(math.floor(Min + (Max-Min)*p))
                    end)
                    UserInputService.InputEnded:Connect(function(i2) if i2.UserInputType == Enum.UserInputType.MouseButton1 then move:Disconnect() end end)
                end
            end)
        end

        -- BUTTON
        function Elements:CreateButton(Text, Callback)
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.new(0.95, 0, 0, 40); B.BackgroundColor3 = Color3.fromRGB(10,10,10); B.BackgroundTransparency = 0.3
            B.Text = Text; B.TextColor3 = Color3.fromRGB(255,230,0); B.Font = Enum.Font.GothamBold; Instance.new("UICorner", B)
            local bS = Instance.new("UIStroke", B); bS.Color = Color3.fromRGB(255,230,0)
            B.MouseButton1Click:Connect(Callback)
        end

        -- KEYBIND
        function Elements:CreateKeybind(Text, Default, Callback)
            local Key = Default
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.new(0.95, 0, 0, 40); B.BackgroundColor3 = Color3.fromRGB(10,10,10); B.BackgroundTransparency = 0.3
            B.Text = Text .. ": " .. Key.Name; B.TextColor3 = Color3.fromRGB(255,230,0); Instance.new("UICorner", B)
            Instance.new("UIStroke", B).Color = Color3.fromRGB(255,230,0)

            B.MouseButton1Click:Connect(function()
                B.Text = "Press any key..."
                local conn; conn = UserInputService.InputBegan:Connect(function(i)
                    if i.UserInputType == Enum.UserInputType.Keyboard then
                        Key = i.KeyCode; B.Text = Text .. ": " .. Key.Name
                        conn:Disconnect()
                    end
                end)
            end)
            UserInputService.InputBegan:Connect(function(i, gpe) if not gpe and i.KeyCode == Key then Callback() end end)
        end

        return Elements
    end

    -- Dragging
    local d, ds, sp
    Main.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then d = true; ds = i.Position; sp = Main.Position end end)
    UserInputService.InputChanged:Connect(function(i) if d and i.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = i.Position - ds
        Main.Position = UDim2.new(sp.X.Scale, sp.X.Offset + delta.X, sp.Y.Scale, sp.Y.Offset + delta.Y)
    end end)
    Main.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then d = false end end)

    return Tabs
end
return BananaLib
